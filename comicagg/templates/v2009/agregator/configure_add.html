{% extends 'base.html' %}
{% load i18n %}
{% block title %}{% trans 'Add comics' %} - {% endblock %}
{% block extra_head %}
		<script src="http://ajax.googleapis.com/ajax/libs/dojo/1.4/dojo/dojo.xd.js" type="text/javascript"></script>
		<script type="text/javascript">
var usercomics = [
{% for comic in user_comics %}
	{'id':{{ comic.id}}, 'name':"{{ comic.name|escape }}", 'slug':"{{ comic.name|slugify }}", 'score':{{ comic.getRating }}, 'votes':{{ comic.votes }}},
{% endfor %}
];
var newcomics = usercomics.clone();
var removedcomics = new Array();
var addedcomics = new Array();
var availablecomics = [
{% for comic in all_comics %}
	{'id':{{ comic.id}}, 'name':"{{ comic.name|escape }}", 'slug':"{{ comic.name|slugify }}", 'score':{{ comic.getRating }}, 'votes':{{ comic.votes }}},
{% endfor %}
];
var available_new = [
{% for newcomic in new_comics %}
	{'id':{{ newcomic.comic.id}}, 'name':"{{ newcomic.comic.name|escape }}", 'slug':"{{ newcomic.comic.name|slugify }}", 'score':{{ newcomic.comic.getRating }}, 'votes':{{ newcomic.comic.votes }}},
{% endfor %}
];
dojo.addOnLoad(initAdd);
		</script>
{% endblock%}
{% block onload %}{% endblock %}
{% block content %}
<div id="add">
	<h3>{% trans "Add comics" %}</h3>
	<div id="comic_info">
		<h4>Hover over a comic to see details</h4>
		<div id="comic_info_wrap" style="display:none">
			<h3 id="comic_name"></h3>
			<p>{% trans "Score" %}: <b><span id="comic_score">{{ comic.getRating }}</span>%</b> (<span id="comic_votes">{{ comic.votes }}</span> {% trans "votos" %})</p>
		</div>
	</div>
	<div class="comic_list_wrap">
		Ordenar por: nombre, puntuaci√≥n, lectores.
		<button>Guardar</button>
		<ul class="comic_list">
{% for comic in all_comics %}
			<li id="comic_{{ comic.id }}" class="comic {% if forloop.last %}last{% endif %}">{{ comic }}</li>
{% endfor %}
		</ul>
	</div>
	<script type="text/javascript">
		var h = $('add').select('.comic_list_wrap')[0].cumulativeOffset()['top'];
		var th = document.viewport.getDimensions()['height'];
		$('add').select('.comic_list')[0].style.height = th-h-24+"px";
	</script>
</div>
{% endblock %}